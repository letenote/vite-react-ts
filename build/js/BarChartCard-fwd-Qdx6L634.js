import{k as t,s,_ as i,r as e,f as o,j as a,i as r,l as n,P as l,R as d}from"./vendor-fwd-1SGvIy31.js";import h from"./index-fwd-zt72GgeW.js";import{C as x,a as p}from"./CardContent-fwd-w9gbeYrB.js";import c from"./index-fwd-QlVXGDcN.js";import f from"./index-fwd-hPOcf5d2.js";import{a as u,c as g,u as m,I as y,g as b,b as w,d as j,S as A,C as v,i as I,D as P,e as M,f as S,R as $,h as C,j as k,k as T,l as O}from"./useInteractionItemProps-fwd-NQTXOW56.js";import{u as R}from"./useSlotProps-fwd-4TF0dLOI.js";import"./index-fwd-lbVkD5aF.js";import"./Paper-fwd-WFaa4pXn.js";import"./Popper-fwd-JYIUw6NP.js";import"./Portal-fwd-EmXNK1q8.js";const E=["id","dataIndex","classes","color","highlightScope","slots","slotProps","style"];function B(t){return n("MuiBarElement",t)}t("MuiBarElement",["root"]);const F=t=>{const{classes:s,id:i}=t;return r({root:["root",`series-${i}`]},B,s)},G=s(u.rect,{name:"MuiBarElement",slot:"Root",overridesResolver:(t,s)=>s.root})((({ownerState:t})=>({stroke:"none",shapeRendering:"crispEdges",fill:t.isHighlighted?g(t.color).brighter(.5).formatHex():t.color,transition:"opacity 0.2s ease-in, fill 0.2s ease-in",opacity:t.isFaded?.3:1})));function J(t){var s;const{id:r,dataIndex:n,classes:l,color:d,highlightScope:h,slots:x,slotProps:p,style:c}=t,f=i(t,E),u=m(h),{item:g}=e.useContext(y),j=b(g,{type:"bar",seriesId:r,dataIndex:n},h),A={id:r,dataIndex:n,classes:l,color:d,isFaded:!j&&w(g,{type:"bar",seriesId:r,dataIndex:n},h),isHighlighted:j},v=F(A),I=null!=(s=null==x?void 0:x.bar)?s:G,P=R({elementType:I,externalSlotProps:null==p?void 0:p.bar,additionalProps:o({},f,u({type:"bar",seriesId:r,dataIndex:n}),{style:c,className:v.root}),ownerState:A});return a.jsx(I,o({},P))}const U=["skipAnimation"];const W=({layout:t,yOrigin:s,x:i,width:e,y:a,xOrigin:r,height:n})=>o({},"vertical"===t?{y:s,x:i,height:0,width:e}:{y:a,x:r,height:n,width:0}),z=({x:t,width:s,y:i,height:e})=>({y:i,x:t,height:e,width:s});function H(t){const s=(()=>{var t;const s=null!=(t=e.useContext(A).bar)?t:{series:{},stackingGroups:[],seriesOrder:[]},i=e.useContext(v),{series:o,stackingGroups:a}=s,{xAxis:r,yAxis:n,xAxisIds:l,yAxisIds:d}=i,h=l[0],x=d[0];return a.flatMap((({ids:t},s)=>t.flatMap((t=>{var i,e;const l=null!=(i=o[t].xAxisKey)?i:h,d=null!=(e=o[t].yAxisKey)?e:x,p=r[l],c=n[d],f="vertical"===o[t].layout;let u;if(f){if(!I(p))throw new Error(`MUI-X-Charts: ${l===P?"The first `xAxis`":`The x-axis with id "${l}"`} shoud be of type "band" to display the bar series of id "${t}"`);if(void 0===r[l].data)throw new Error(`MUI-X-Charts: ${l===P?"The first `xAxis`":`The x-axis with id "${l}"`} shoud have data property`);u=p}else{if(!I(c))throw new Error(`MUI-X-Charts: ${d===M?"The first `yAxis`":`The y-axis with id "${d}"`} shoud be of type "band" to display the bar series of id "${t}"`);if(void 0===n[d].data)throw new Error(`MUI-X-Charts: ${d===M?"The first `yAxis`":`The y-axis with id "${d}"`} shoud have data property`);u=c}const g=p.scale,m=c.scale,y=u.scale.bandwidth(),{barWidth:b,offset:w}=function({bandWidth:t,numberOfGroups:s,gapRatio:i}){if(0===i)return{barWidth:t/s,offset:0};const e=t/(s+(s-1)*i);return{barWidth:e,offset:i*e}}({bandWidth:y,numberOfGroups:a.length,gapRatio:u.barGapRatio}),j=s*(b+w),{stackedData:A,color:v}=o[t];return A.map(((s,i)=>{var e,a;const h=Math.min(...s),x=Math.max(...s);return{bottom:h,top:x,seriesId:t,dataIndex:i,layout:o[t].layout,x:f?g(null==(e=r[l].data)?void 0:e[i])+j:g(h),y:f?m(x):m(null==(a=n[d].data)?void 0:a[i])+j,xOrigin:g(0),yOrigin:m(0),height:f?Math.abs(m(h)-m(x)):b,width:f?b:Math.abs(g(h)-g(x)),color:v,highlightScope:o[t].highlightScope}}))}))))})(),{skipAnimation:r}=t,n=i(t,U),l=j(s,{keys:t=>`${t.seriesId}-${t.dataIndex}`,from:W,leave:W,enter:z,update:z,immediate:r});return a.jsx(e.Fragment,{children:l(((t,{seriesId:s,dataIndex:i,color:e,highlightScope:r})=>a.jsx(J,o({id:s,dataIndex:i,highlightScope:r,color:e},n,{style:t}))))})}function N(t){const{id:s,offset:i}=t,{left:r,top:n,width:l,height:d}=e.useContext(S),h=o({top:0,right:0,bottom:0,left:0},i);return a.jsx("clipPath",{id:s,children:a.jsx("rect",{x:r-h.left,y:n-h.top,width:l+h.left+h.right,height:d+h.top+h.bottom})})}const X=e.forwardRef((function(t,s){const{xAxis:i,yAxis:e,series:r,width:n,height:d,margin:h,colors:x,dataset:p,sx:c,layout:f,tooltip:u,axisHighlight:g,legend:m,topAxis:y,leftAxis:b,rightAxis:w,bottomAxis:j,skipAnimation:A,children:v,slots:I,slotProps:S}=t,R=`${l()}-clip-path`,E="horizontal"===f||void 0===f&&r.some((t=>"horizontal"===t.layout)),B={scaleType:"band",data:Array.from({length:Math.max(...r.map((t=>{var s,i;return(null!=(s=null!=(i=t.data)?i:p)?s:[]).length})))},((t,s)=>s))},F=o({},E?{y:"band"}:{x:"band"},g);return a.jsxs($,{ref:s,series:r.map((t=>o({type:"bar"},t,{layout:E?"horizontal":"vertical"}))),width:n,height:d,margin:h,xAxis:null!=i?i:E?void 0:[o({id:P},B)],yAxis:null!=e?e:E?[o({id:M},B)]:void 0,colors:x,dataset:p,sx:c,disableAxisListener:"axis"!==(null==u?void 0:u.trigger)&&"none"===(null==g?void 0:g.x)&&"none"===(null==g?void 0:g.y),children:[a.jsx("g",{clipPath:`url(#${R})`,children:a.jsx(H,{slots:I,slotProps:S,skipAnimation:A})}),a.jsx(C,{topAxis:y,leftAxis:b,rightAxis:w,bottomAxis:j,slots:I,slotProps:S}),a.jsx(k,o({},m,{slots:I,slotProps:S})),a.jsx(T,o({},F)),a.jsx(O,o({},u,{slots:I,slotProps:S})),a.jsx(N,{id:R}),v]})})),D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],K=d.memo((t=>a.jsx(x,{variant:"outlined",sx:{pl:3,mt:1},children:t.loading?a.jsx(c,{sx:{height:"360px",ml:-3},children:a.jsx(h,{message:""})}):a.jsxs(p,{sx:{p:0},children:[a.jsx(c,{sx:{display:"flex",mt:2,mb:-.5},children:a.jsx(f,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,children:t.label})}),a.jsx(X,{height:300,series:[{data:t.data,label:"Total",id:"pvId",stack:"total",color:"#FB8C00"}],xAxis:[{data:D,scaleType:"band"}],slotProps:{legend:{hidden:!0}}})]})})),((t,s)=>JSON.stringify(t)===JSON.stringify(s)));export{K as default};

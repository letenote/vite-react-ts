{"version":3,"file":"getPayments-fwd-yPsLGiWd.js","sources":["../../src/store/slice/page/payment/action/getPayments.ts"],"sourcesContent":["import { Dispatch } from '@reduxjs/toolkit';\nimport API from '../../../../../helper/API';\nimport request from 'axios';\nimport { setSnackbar } from '../../../components/reducer/snackbar';\nimport { ErrorResposeType } from '../../../../../helper/useHttp';\nimport { setPaymentList, setPaymentListLoading } from '../reducer';\n\ntype GetPaymentsParamType = {\n  page: number;\n  startDate?: string;\n  endDate?: string;\n  status?: string;\n  vendorName?: string;\n};\n\nexport const getPayments =\n  (param: GetPaymentsParamType) => async (dispatch: Dispatch) => {\n    try {\n      const {\n        page,\n        startDate = '',\n        endDate = '',\n        status = '',\n        vendorName = '',\n      } = param;\n      dispatch(setPaymentListLoading({ loading: true }));\n      await new Promise((resolve) => setTimeout(resolve, 1000));\n\n      const response = await API({\n        method: 'post',\n        url: `/v1/payments`,\n        payload: {\n          page: page - 1,\n          startDate,\n          endDate,\n          status,\n          vendorName,\n        },\n      });\n\n      console.log('response', { response, param });\n      dispatch(\n        setPaymentList({\n          list: response.data.data.payments,\n          totalPage: response.data.data.pagination.totalPage,\n        })\n      );\n      dispatch(setPaymentListLoading({ loading: false }));\n    } catch (error) {\n      if (request.isAxiosError(error) && error.response) {\n        console.log('errr', (error.response?.data as ErrorResposeType).error);\n        dispatch(\n          setSnackbar({\n            open: true,\n            autoHideDuration: 3000,\n            severity: 'warning',\n            message: error.message,\n          })\n        );\n      }\n    }\n  };\n"],"names":["getPayments","param","async","dispatch","page","startDate","endDate","status","vendorName","setPaymentListLoading","loading","Promise","resolve","setTimeout","response","API","method","url","payload","console","log","setPaymentList","list","data","payments","totalPage","pagination","error","request","isAxiosError","_a","setSnackbar","open","autoHideDuration","severity","message"],"mappings":"0GAeO,MAAMA,EACVC,GAAgCC,MAAOC,UAClC,IACI,MAAAC,KACJA,EAAAC,UACAA,EAAY,GAAAC,QACZA,EAAU,GAAAC,OACVA,EAAS,GAAAC,WACTA,EAAa,IACXP,EACJE,EAASM,EAAsB,CAAEC,SAAS,WACpC,IAAIC,SAASC,GAAYC,WAAWD,EAAS,OAE7C,MAAAE,QAAiBC,EAAI,CACzBC,OAAQ,OACRC,IAAK,eACLC,QAAS,CACPd,KAAMA,EAAO,EACbC,YACAC,UACAC,SACAC,gBAIJW,QAAQC,IAAI,WAAY,CAAEN,WAAUb,UACpCE,EACEkB,EAAe,CACbC,KAAMR,EAASS,KAAKA,KAAKC,SACzBC,UAAWX,EAASS,KAAKA,KAAKG,WAAWD,aAG7CtB,EAASM,EAAsB,CAAEC,SAAS,WACnCiB,GACHC,EAAQC,aAAaF,IAAUA,EAAMb,WACvCK,QAAQC,IAAI,QAAS,OAAAU,EAAAH,EAAMb,eAAN,EAAAgB,EAAgBP,MAA0BI,OAC/DxB,EACE4B,EAAY,CACVC,MAAM,EACNC,iBAAkB,IAClBC,SAAU,UACVC,QAASR,EAAMQ,WAIvB"}
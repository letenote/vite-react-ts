import{R as t,d as e,r as i,j as s,z as a,A as r,u as n,L as o}from"./vendor-fwd-1SGvIy31.js";import{n as d,u as m,c as l,b as p}from"./main-fwd--n1B72RI.js";import{M as x,T as c}from"./index-fwd-x8ldU6o3.js";import{g as f}from"./getTrainings-fwd-hR0-yyMw.js";import{d as g}from"./Close-fwd-cAl8Tvfj.js";import{d as j}from"./Work-fwd-uyr6dy_C.js";import{d as u,a as h}from"./QueryBuilderRounded-fwd-2BtULDBg.js";import{h as w}from"./moment-fwd-Q1JHmZVX.js";import b from"./index-fwd-zt72GgeW.js";import{g as y}from"./getTraining-fwd-8cmMt0Rf.js";import{b as v}from"./index-fwd-lWyokz70.js";import{a as I,b as D,c as B}from"./DialogContent-fwd-CYcOnUyi.js";import{D as C}from"./DialogTitle-fwd-BhLgXYUL.js";import S from"./index-fwd-v2U3PscQ.js";import T from"./index-fwd-QlVXGDcN.js";import R from"./index-fwd-hPOcf5d2.js";import{C as P}from"./Chip-fwd-PLmggBsV.js";import{D as Y}from"./Divider-fwd-L0kvT4D9.js";import M from"./index-fwd-fyRmXZir.js";import{L as N}from"./ListItem-fwd-iX4GRk4M.js";import{L as W}from"./ListItemAvatar-fwd-_WncWLnl.js";import{L}from"./ListItemText-fwd-f8rlfGNg.js";import{A as k}from"./Avatar-fwd-DjoP233w.js";import A from"./index-fwd-goasdrlS.js";import{R as z}from"./Permission.enum-fwd-pLKPg_gz.js";import{S as E}from"./Stack-fwd-_b9icarT.js";import{P as F,a as G}from"./MoreVert-fwd-WWrhY7aJ.js";import"./index-fwd-LcBzpfNx.js";import"./interopRequireDefault-fwd-TQpPSNg9.js";import"./createSvgIcon-fwd-C5HoRyYL.js";import"./createSvgIcon-fwd-3znVHFND.js";import"./Visibility-fwd-Vs-P4HLI.js";import"./BudgetStatus.enum-fwd-ooaJayoQ.js";import"./TrainingStatusType.enum-fwd-N0jD9jO9.js";import"./Menu-fwd-Vl9pMXPK.js";import"./Modal-fwd-p5WxUrg9.js";import"./utils-fwd-Aa8Nbi8J.js";import"./TransitionGroupContext-fwd-AdrtyOFN.js";import"./useSlotProps-fwd-4TF0dLOI.js";import"./Portal-fwd-EmXNK1q8.js";import"./Paper-fwd-WFaa4pXn.js";import"./Grow-fwd-0-97KQP6.js";import"./List-fwd-B3qUSFQa.js";import"./MenuItem-fwd-JVQWDuju.js";import"./index-fwd-8NRQb7QL.js";import"./listItemIconClasses-fwd-R0gCvGgm.js";import"./dividerClasses-fwd-g7uA4vLh.js";import"./listItemTextClasses-fwd-v4LoqRQE.js";import"./API-fwd-wSBNwRC-.js";import"./index-fwd-lbVkD5aF.js";import"./Button-fwd-V0oP7Gqc.js";const O=t.memo((r=>{const n=d(),{training:o}=m((t=>t.pages)),x=e(),c=v(x.breakpoints.down("md"));return i.useEffect((()=>(n(y({id:r.data.id,successCB:()=>{},failedCB:()=>{}})),()=>{n(l({loading:!0})),n(p({data:null}))})),[n,r.data.id]),s.jsxs(I,{id:"training-view-dialog",fullScreen:c,fullWidth:!0,maxWidth:"sm","aria-labelledby":"training-view-dialog",disableEscapeKeyDown:!0,open:r.open,children:[s.jsx(C,{sx:{m:0,p:2},id:"customized-dialog-title",children:"Training Detail"}),s.jsx(S,{"aria-label":"close",onClick:r.closeEvent,sx:{position:"absolute",right:8,top:8,color:t=>t.palette.grey[500]},children:s.jsx(g,{})}),s.jsx(D,{dividers:!0,sx:{pb:"45px",p:"24px 32px"},children:s.jsx(T,{sx:{mt:1},children:o.detail.loading?s.jsx(T,{sx:{height:"650px"},children:s.jsx(b,{message:"loading.."})}):s.jsxs(t.Fragment,{children:[s.jsx(R,{variant:"h5",gutterBottom:!0,sx:{fontWeight:900},children:o.detail.data.name}),s.jsxs(R,{variant:"caption",gutterBottom:!0,sx:{mb:4},children:["Created by, ",o.detail.data.createdBy.name," (",o.detail.data.createdBy.departement.name,") at"," ",w(o.detail.data.createdAt).format("DD MMM YYYY"),"."]}),s.jsx(R,{variant:"subtitle1",gutterBottom:!0,sx:{mt:2,mb:1,fontWeight:900},children:"Objective:"}),s.jsx(R,{variant:"body2",gutterBottom:!0,children:o.detail.data.objective}),s.jsxs(T,{sx:{mt:4,display:"flex",alignItems:"center"},children:[s.jsx(u,{sx:{color:"grey",width:"18px",mr:1}}),s.jsxs(R,{variant:"body2",gutterBottom:!0,children:[o.detail.data.duration," Hours."]}),s.jsx(h,{sx:{color:"grey",width:"18px",ml:2,mr:1}}),s.jsxs(R,{variant:"body2",gutterBottom:!0,children:[w(new Date(o.detail.data.startDate)).format("DD/MM/YYYY")," ","-"," ",w(new Date(o.detail.data.endDate)).format("DD/MM/YYYY")]})]}),s.jsx(P,{size:"small",label:o.detail.data.trainingType.name,variant:"outlined",sx:{mt:2}}),s.jsx(Y,{variant:"middle",sx:{mt:3,mb:1,ml:0,mr:0}}),s.jsx(R,{variant:"subtitle1",gutterBottom:!0,sx:{mt:2,mb:2,fontWeight:900},children:"Budget:"}),s.jsxs(T,{children:[s.jsx(R,{variant:"body1",gutterBottom:!0,sx:{fontWeight:900},children:o.detail.data.budget.name}),s.jsx(R,{variant:"h6",gutterBottom:!0,sx:{fontWeight:900},children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(Number(o.detail.data.budget.cost))}),s.jsxs(R,{variant:"caption",gutterBottom:!0,sx:{mb:4},children:["Request by, ",o.detail.data.budget.requestBy.name," at"," ",w(o.detail.data.budget.requestBy.createdAt).format("DD MMM YYYY"),"."]})]}),s.jsx(P,{size:"small",label:o.detail.data.budget.code,variant:"outlined",sx:{mt:3}}),s.jsx(Y,{variant:"middle",sx:{mt:3,mb:1,ml:0,mr:0}}),s.jsxs(R,{variant:"subtitle1",gutterBottom:!0,sx:{mt:2,mb:2,fontWeight:900},children:[o.detail.data.payments.length," Vendors:"]}),s.jsx(T,{sx:{flexGrow:1},children:s.jsx(M,{container:!0,spacing:{xs:1,md:1},columns:{xs:4,sm:8,md:12},children:o.detail.data.payments.map(((e,i)=>s.jsx(M,{item:!0,xs:12,sm:6,md:4,children:s.jsxs(N,{alignItems:"flex-start",sx:{p:0},children:[s.jsxs(W,{sx:{marginRight:"-10px",position:"relative"},children:[s.jsx(j,{sx:{fontSize:35,color:"grey"}}),s.jsx("span",{style:{fontSize:"7px",backgroundColor:e.isPaid?a[500]:"orange",color:"white",padding:"5px",borderRadius:"10px",marginRight:"5px",fontWeight:900,position:"absolute",top:"50%",left:"50%",transform:"translate(-80%, 0%)"},children:e.isPaid?"Paid":"Unpaid"})]}),s.jsx(L,{primary:e.vendor.name,secondary:s.jsx(t.Fragment,{children:s.jsx("span",{style:{fontSize:"12px",marginTop:"-5px"},children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(Number(e.cost))})})})]},i)},i)))})}),o.detail.data.payments.length>1&&s.jsxs(t.Fragment,{children:[s.jsx(Y,{variant:"middle",sx:{mt:3,mb:1,ml:0,mr:0}}),s.jsx(R,{variant:"subtitle1",gutterBottom:!0,sx:{mt:2,mb:2,fontWeight:900},children:"Total Vendor Cost:"}),s.jsx(T,{children:s.jsx(R,{variant:"h6",gutterBottom:!0,sx:{fontWeight:900},children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(Number(o.detail.data.payments.reduce(((t,e)=>t+Number(e.cost)),0)))})})]}),s.jsx(Y,{variant:"middle",sx:{mt:3,mb:1,ml:0,mr:0}}),s.jsxs(R,{variant:"subtitle1",gutterBottom:!0,sx:{mt:2,mb:2,fontWeight:900},children:[o.detail.data.participants.length," Participants:"]}),s.jsx(T,{sx:{flexGrow:1},children:s.jsx(M,{container:!0,spacing:{xs:1,md:1},columns:{xs:4,sm:8,md:12},children:o.detail.data.participants.map(((t,e)=>s.jsx(M,{item:!0,xs:12,sm:6,md:4,children:s.jsxs(N,{alignItems:"flex-start",sx:{p:0},children:[s.jsx(W,{sx:{marginRight:"-10px"},children:s.jsx(k,{alt:"Remy Sharp",sx:{width:35,height:35}})}),s.jsx(L,{primary:t.name,secondary:s.jsx("span",{style:{fontSize:"12px",marginTop:"-5px"},children:t.departement.name})})]},e)},e)))})})]})})}),s.jsx(B,{children:s.jsx(A,{loading:!1,disabled:!1,variant:"outlined",size:"medium",onClick:r.closeEvent,children:s.jsx(R,{variant:"button",display:"block",gutterBottom:!0,children:"Close"})})})]})}),((t,e)=>JSON.stringify(t)===JSON.stringify(e))),V=t=>!0,q=t=>t===z.HR,J=t.memo((()=>{const e=r(),a=d(),{training:l}=m((t=>t.pages)),{user:p}=m((t=>t.settings)),g=n(),j=new URLSearchParams(g.search),u=parseInt(j.get("page")||"1",10);i.useEffect((()=>{a(f({page:u}))}),[a,u]);const[h,w]=i.useState({open:!1,listIndex:0});return s.jsxs(t.Fragment,{children:[s.jsx(x,{impl:c.TRAINING_PAGE,headers:["Training Name","Type","Participants","Budget","Status","Cost","Date"],getValue:["name","trainingType.name","participants","budget.cost","payments.isPaid","cost","startDate"],datas:l.list,loading:l.listLoading,useAction:!0,action:{view:{use:V(p.role),onClick:t=>w({open:!0,listIndex:t})},edit:{use:q(p.role),onClick:t=>{return i=t,e(`/training/create?u=${l.list[i].id}`);var i}}}}),s.jsx(E,{spacing:2,sx:{alignItems:"center",mt:3},children:s.jsx(F,{page:u,count:l.totalPage,onChange:(t,e)=>{a(f({page:e}))},renderItem:t=>s.jsx(G,{component:o,to:"/training"+(1===t.page?"":`?page=${t.page}`),...t})})}),h.open&&s.jsx(O,{open:h.open,closeEvent:()=>w({open:!1,listIndex:0}),data:l.list[h.listIndex]})]})}),((t,e)=>JSON.stringify(t)===JSON.stringify(e)));export{J as default};

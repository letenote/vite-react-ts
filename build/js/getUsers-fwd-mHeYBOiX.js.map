{"version":3,"file":"getUsers-fwd-mHeYBOiX.js","sources":["../../src/store/slice/page/user/action/getUsers.ts"],"sourcesContent":["import { Dispatch } from '@reduxjs/toolkit';\nimport API from '../../../../../helper/API';\nimport { setListLoading, setUserList } from '../reducer';\nimport request from 'axios';\nimport { setSnackbar } from '../../../components/reducer/snackbar';\nimport { ErrorResposeType } from '../../../../../helper/useHttp';\n\ntype GetUsersParamType = {\n  page: number;\n  name?: string;\n  status?: string;\n  departementId?: string;\n};\n\nexport const getUsers =\n  (param: GetUsersParamType) => async (dispatch: Dispatch) => {\n    try {\n      const { page = 0, name = '', status = '', departementId = '' } = param;\n      dispatch(setListLoading({ loading: true }));\n      await new Promise((resolve) => setTimeout(resolve, 500));\n\n      const response = await API({\n        method: 'post',\n        url: '/v1/users',\n        payload: { page: page - 1, name, status, departementId },\n      });\n\n      dispatch(\n        setUserList({\n          list: response.data.data.users,\n          totalPage: response.data.data.pagination.totalPage,\n        })\n      );\n      dispatch(setListLoading({ loading: false }));\n    } catch (error) {\n      if (request.isAxiosError(error) && error.response) {\n        console.log('errr', (error.response?.data as ErrorResposeType).error);\n        dispatch(\n          setSnackbar({\n            open: true,\n            autoHideDuration: 3000,\n            severity: 'warning',\n            message: error.message,\n          })\n        );\n      }\n    }\n  };\n"],"names":["getUsers","param","async","dispatch","page","name","status","departementId","setListLoading","loading","Promise","resolve","setTimeout","response","API","method","url","payload","setUserList","list","data","users","totalPage","pagination","error","request","isAxiosError","console","log","_a","setSnackbar","open","autoHideDuration","severity","message"],"mappings":"0GAcO,MAAMA,EACVC,GAA6BC,MAAOC,UAC/B,IACI,MAAAC,KAAEA,EAAO,EAAGC,KAAAA,EAAO,UAAIC,EAAS,GAAAC,cAAIA,EAAgB,IAAON,EACjEE,EAASK,EAAe,CAAEC,SAAS,WAC7B,IAAIC,SAASC,GAAYC,WAAWD,EAAS,OAE7C,MAAAE,QAAiBC,EAAI,CACzBC,OAAQ,OACRC,IAAK,YACLC,QAAS,CAAEb,KAAMA,EAAO,EAAGC,OAAMC,SAAQC,mBAG3CJ,EACEe,EAAY,CACVC,KAAMN,EAASO,KAAKA,KAAKC,MACzBC,UAAWT,EAASO,KAAKA,KAAKG,WAAWD,aAG7CnB,EAASK,EAAe,CAAEC,SAAS,WAC5Be,GACHC,EAAQC,aAAaF,IAAUA,EAAMX,WACvCc,QAAQC,IAAI,QAAS,OAAAC,EAAAL,EAAMX,eAAN,EAAAgB,EAAgBT,MAA0BI,OAC/DrB,EACE2B,EAAY,CACVC,MAAM,EACNC,iBAAkB,IAClBC,SAAU,UACVC,QAASV,EAAMU,WAIvB"}
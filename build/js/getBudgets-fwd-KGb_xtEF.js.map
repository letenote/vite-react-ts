{"version":3,"file":"getBudgets-fwd-KGb_xtEF.js","sources":["../../src/store/slice/page/budget/action/getBudgets.ts"],"sourcesContent":["import { Dispatch } from '@reduxjs/toolkit';\nimport API from '../../../../../helper/API';\nimport request from 'axios';\nimport { setSnackbar } from '../../../components/reducer/snackbar';\nimport { ErrorResposeType } from '../../../../../helper/useHttp';\nimport { setBudgetList, setBudgetListLoading } from '../reducer';\n\ntype GetBudgetsParamType = {\n  page: number;\n  startDate?: string;\n  endDate?: string;\n  status?: string;\n  name?: string;\n};\n\nexport const getBudgets =\n  (param: GetBudgetsParamType) => async (dispatch: Dispatch) => {\n    try {\n      const {\n        page,\n        startDate = '',\n        endDate = '',\n        status = '',\n        name = '',\n      } = param;\n      dispatch(setBudgetListLoading({ loading: true }));\n      await new Promise((resolve) => setTimeout(resolve, 1000));\n\n      const response = await API({\n        method: 'post',\n        url: `/v1/budgets`,\n        payload: {\n          page: page - 1,\n          startDate,\n          endDate,\n          status,\n          name,\n        },\n      });\n\n      console.log('response', { response, param });\n      dispatch(\n        setBudgetList({\n          list: response.data.data.budgets,\n          totalPage: response.data.data.pagination.totalPage,\n        })\n      );\n      dispatch(setBudgetListLoading({ loading: false }));\n    } catch (error) {\n      if (request.isAxiosError(error) && error.response) {\n        console.log('errr', (error.response?.data as ErrorResposeType).error);\n        dispatch(\n          setSnackbar({\n            open: true,\n            autoHideDuration: 3000,\n            severity: 'warning',\n            message: error.message,\n          })\n        );\n      }\n    }\n  };\n"],"names":["getBudgets","param","async","dispatch","page","startDate","endDate","status","name","setBudgetListLoading","loading","Promise","resolve","setTimeout","response","API","method","url","payload","console","log","setBudgetList","list","data","budgets","totalPage","pagination","error","request","isAxiosError","_a","setSnackbar","open","autoHideDuration","severity","message"],"mappings":"0GAeO,MAAMA,EACVC,GAA+BC,MAAOC,UACjC,IACI,MAAAC,KACJA,EAAAC,UACAA,EAAY,GAAAC,QACZA,EAAU,GAAAC,OACVA,EAAS,GAAAC,KACTA,EAAO,IACLP,EACJE,EAASM,EAAqB,CAAEC,SAAS,WACnC,IAAIC,SAASC,GAAYC,WAAWD,EAAS,OAE7C,MAAAE,QAAiBC,EAAI,CACzBC,OAAQ,OACRC,IAAK,cACLC,QAAS,CACPd,KAAMA,EAAO,EACbC,YACAC,UACAC,SACAC,UAIJW,QAAQC,IAAI,WAAY,CAAEN,WAAUb,UACpCE,EACEkB,EAAc,CACZC,KAAMR,EAASS,KAAKA,KAAKC,QACzBC,UAAWX,EAASS,KAAKA,KAAKG,WAAWD,aAG7CtB,EAASM,EAAqB,CAAEC,SAAS,WAClCiB,GACHC,EAAQC,aAAaF,IAAUA,EAAMb,WACvCK,QAAQC,IAAI,QAAS,OAAAU,EAAAH,EAAMb,eAAN,EAAAgB,EAAgBP,MAA0BI,OAC/DxB,EACE4B,EAAY,CACVC,MAAM,EACNC,iBAAkB,IAClBC,SAAU,UACVC,QAASR,EAAMQ,WAIvB"}
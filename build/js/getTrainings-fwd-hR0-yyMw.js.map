{"version":3,"file":"getTrainings-fwd-hR0-yyMw.js","sources":["../../src/store/slice/page/training/action/getTrainings.ts"],"sourcesContent":["import { Dispatch } from '@reduxjs/toolkit';\nimport API from '../../../../../helper/API';\nimport request from 'axios';\nimport { setSnackbar } from '../../../components/reducer/snackbar';\nimport { ErrorResposeType } from '../../../../../helper/useHttp';\nimport { setTrainingList, setTrainingListLoading } from '../reducer';\n\ntype GetTrainingsParamType = {\n  page: number;\n  startDate?: string;\n  endDate?: string;\n  status?: string;\n  name?: string;\n};\n\nexport const getTrainings =\n  (param: GetTrainingsParamType) => async (dispatch: Dispatch) => {\n    try {\n      const {\n        page,\n        startDate = '',\n        endDate = '',\n        status = '',\n        name = '',\n      } = param;\n      dispatch(setTrainingListLoading({ loading: true }));\n      await new Promise((resolve) => setTimeout(resolve, 500));\n\n      const response = await API({\n        method: 'post',\n        url: `/v1/trainings`,\n        payload: {\n          page: page - 1,\n          startDate,\n          endDate,\n          status,\n          name,\n        },\n      });\n\n      console.log('response', { response, param });\n      dispatch(\n        setTrainingList({\n          list: response.data.data.trainings,\n          totalPage: response.data.data.pagination.totalPage,\n        })\n      );\n      dispatch(setTrainingListLoading({ loading: false }));\n    } catch (error) {\n      if (request.isAxiosError(error) && error.response) {\n        console.log('errr', (error.response?.data as ErrorResposeType).error);\n        dispatch(\n          setSnackbar({\n            open: true,\n            autoHideDuration: 3000,\n            severity: 'warning',\n            message: error.message,\n          })\n        );\n      }\n    }\n  };\n"],"names":["getTrainings","param","async","dispatch","page","startDate","endDate","status","name","setTrainingListLoading","loading","Promise","resolve","setTimeout","response","API","method","url","payload","console","log","setTrainingList","list","data","trainings","totalPage","pagination","error","request","isAxiosError","_a","setSnackbar","open","autoHideDuration","severity","message"],"mappings":"0GAeO,MAAMA,EACVC,GAAiCC,MAAOC,UACnC,IACI,MAAAC,KACJA,EAAAC,UACAA,EAAY,GAAAC,QACZA,EAAU,GAAAC,OACVA,EAAS,GAAAC,KACTA,EAAO,IACLP,EACJE,EAASM,EAAuB,CAAEC,SAAS,WACrC,IAAIC,SAASC,GAAYC,WAAWD,EAAS,OAE7C,MAAAE,QAAiBC,EAAI,CACzBC,OAAQ,OACRC,IAAK,gBACLC,QAAS,CACPd,KAAMA,EAAO,EACbC,YACAC,UACAC,SACAC,UAIJW,QAAQC,IAAI,WAAY,CAAEN,WAAUb,UACpCE,EACEkB,EAAgB,CACdC,KAAMR,EAASS,KAAKA,KAAKC,UACzBC,UAAWX,EAASS,KAAKA,KAAKG,WAAWD,aAG7CtB,EAASM,EAAuB,CAAEC,SAAS,WACpCiB,GACHC,EAAQC,aAAaF,IAAUA,EAAMb,WACvCK,QAAQC,IAAI,QAAS,OAAAU,EAAAH,EAAMb,eAAN,EAAAgB,EAAgBP,MAA0BI,OAC/DxB,EACE4B,EAAY,CACVC,MAAM,EACNC,iBAAkB,IAClBC,SAAU,UACVC,QAASR,EAAMQ,WAIvB"}
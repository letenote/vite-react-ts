import{l as e,k as t,s as a,f as s,r,b as o,_ as n,j as i,h as l,i as d,R as p,d as m,p as u}from"./vendor-fwd-1SGvIy31.js";import{i as c}from"./interopRequireDefault-fwd-TQpPSNg9.js";import{r as g}from"./createSvgIcon-fwd-C5HoRyYL.js";import{d as x}from"./KeyboardArrowLeft-fwd-YQdeLDYs.js";import{s as f,g as v}from"./getSelectInputOptions-fwd-ZVToRqqx.js";import{a as y,C as h}from"./index.esm-fwd-rj9UIJ_I.js";import{C as j}from"./ComponentFormType.enum-fwd-9JVL8E6k.js";import{c as b}from"./populateString-fwd-uH2jbhuZ.js";import{p as w,q as T,s as C,H as S,n as k,I as E,u as D}from"./main-fwd--n1B72RI.js";import{A as $,a as B}from"./API-fwd-wSBNwRC-.js";import{M as A,S as P}from"./SelectInputDialogType.type-fwd-EhrzjEHx.js";import{b as M}from"./index-fwd-lWyokz70.js";import{a as R,b as I,c as L}from"./DialogContent-fwd-CYcOnUyi.js";import{A as N}from"./AppBar-fwd-dzp-VbdY.js";import O from"./index-fwd-v2U3PscQ.js";import q from"./index-fwd-hPOcf5d2.js";import F from"./index-fwd-QlVXGDcN.js";import{b as H,F as W,a as z}from"./index-fwd-YZzHoVcr.js";import _ from"./index-fwd-goasdrlS.js";import{M as G,d as J}from"./index-fwd-LcBzpfNx.js";import U from"./index-fwd-zt72GgeW.js";import{M as K}from"./index-fwd-rz4yujvt.js";import{B as V}from"./Button-fwd-V0oP7Gqc.js";import{L as X}from"./List-fwd-B3qUSFQa.js";import{L as Z,a as Q}from"./ListItem-fwd-iX4GRk4M.js";import{L as Y}from"./ListItemText-fwd-f8rlfGNg.js";import{D as ee}from"./Divider-fwd-L0kvT4D9.js";function te(t){return e("MuiToolbar",t)}t("MuiToolbar",["root","gutters","regular","dense"]);const ae=["className","component","disableGutters","variant"],se=a("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,!a.disableGutters&&t.gutters,t[a.variant]]}})((({theme:e,ownerState:t})=>s({position:"relative",display:"flex",alignItems:"center"},!t.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}},"dense"===t.variant&&{minHeight:48})),(({theme:e,ownerState:t})=>"regular"===t.variant&&e.mixins.toolbar)),re=r.forwardRef((function(e,t){const a=o({props:e,name:"MuiToolbar"}),{className:r,component:p="div",disableGutters:m=!1,variant:u="regular"}=a,c=n(a,ae),g=s({},a,{component:p,disableGutters:m,variant:u}),x=(e=>{const{classes:t,disableGutters:a,variant:s}=e;return d({root:["root",!a&&"gutters",s]},te,t)})(g);return i.jsx(se,s({as:p,className:l(x.root,r),ref:t,ownerState:g},c))}));var oe={},ne=c;Object.defineProperty(oe,"__esModule",{value:!0});var ie=oe.default=void 0,le=ne(g()),de=i;ie=oe.default=(0,le.default)((0,de.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown");const pe={name:{id:"name",name:"name",fullWidth:!0,label:"Name",placeholder:"Name",required:!0,errorMessage:"name required",value:"",disabled:!1,type:"text",componentType:j.INPUT_TEXT,autoFocus:!0,autoComplete:"",validate:{pattern:{value:/^[a-zA-Z 0-9_.-]*$/,message:"Only letters, No Symbol"},other:[]},options:[]}},me=e=>{switch(e){case"trainingType":return"/v1/trainings/types/register";case"vendorType":return"/v1/vendors/types/register";default:return`/v1/users/${e}s/register`}},ue=e=>{switch(e){case"trainingType":return"/v1/trainings/types/update";case"vendorType":return"/v1/vendors/types/update";default:return`/v1/users/${e}s/update`}},ce=document.getElementById("modals"),ge=e=>u.createPortal(e.children,ce),xe=p.memo((e=>{const[t,a]=r.useState(!1),s=k(),o=f(e.type),n=m(),l=M(n.breakpoints.down("md")),d=pe,p=y({defaultValues:async()=>{var t;return d.name.value=(null==(t=e.populate)?void 0:t.name)??"",d}}),{register:u,handleSubmit:c,formState:g}=p,{errors:v}=g,h=t=>{var r,o;return console.log("SUBMIT",{data:t,errors:v}),a(!0),e.methodType===A.UPDATE?s((o={type:e.type,id:(null==(r=e.populate)?void 0:r.id)||"",name:t.name.value.toString(),successCB:e.backEvent},async e=>{var t,a;try{const t=f(o.type);return await $({method:"post",url:ue(t),payload:{id:o.id,name:o.name}}),e(S({type:t,id:o.id,name:o.name})),await new Promise((e=>setTimeout(e,500))),e(C({open:!0,autoHideDuration:3e3,severity:"success",message:`Success update ${t}`})),o.successCB()}catch(s){B.isAxiosError(s)&&s.response&&(console.log("errr",(null==(t=s.response)?void 0:t.data).error),e(C({open:!0,autoHideDuration:3e3,severity:"warning",message:(null==(a=s.response)?void 0:a.data.message)??s.message??""})),e(T({type:f(o.type),loading:!1})))}})):s((e=>async t=>{var a,s;try{const a=f(e.type),s=await $({method:"post",url:me(a),payload:{name:e.forms.name.value}});return t(w({type:a,list:[s.data.data]})),await new Promise((e=>setTimeout(e,500))),t(T({type:a,loading:!1})),e.successCB()}catch(r){return B.isAxiosError(r)&&r.response&&(console.log("errr",(null==(a=r.response)?void 0:a.data).error),t(C({open:!0,autoHideDuration:3e3,severity:"warning",message:(null==(s=r.response)?void 0:s.data.message)??r.message??""})),t(T({type:f(e.type),loading:!1}))),e.failedCB()}})({type:e.type,forms:t,successCB:e.backEvent,failedCB:()=>{a(!1)}}))},j=e=>{console.log("ERROR",{errors:e,form:p}),s(C({open:!0,autoHideDuration:2e3,severity:"warning",message:"Please make sure all forms to be filled"}))};return i.jsx(ge,{children:i.jsxs(R,{component:"form",id:`${o}-create-dialog`,onSubmit:e=>{e.preventDefault(),e.stopPropagation(),c(h,j)(e)},fullScreen:l,fullWidth:!0,maxWidth:"sm",onClose:()=>{},"aria-labelledby":"user-create-dialog",disableEscapeKeyDown:!0,open:e.open,children:[i.jsx(N,{sx:{position:"relative",backgroundColor:"white"},children:i.jsxs(re,{children:[i.jsx(O,{edge:"start",color:"inherit",disabled:t,onClick:e.backEvent,"aria-label":"close",children:i.jsx(x,{})}),i.jsx(q,{sx:{ml:2,flex:1},variant:"h6",component:"div",children:`Add New ${o}`})]})}),i.jsxs(I,{dividers:!0,sx:{height:"350px"},children:[i.jsx(F,{sx:{mt:1},children:Object.keys(d).map(((e,t)=>{var a;const s=d[e],r=`${e}.value`,n=v[e],l=`${b(o)} ${s.label}`;return s.componentType,i.jsx(H,{margin:"normal",sx:{ml:{xs:0,md:0},width:{xs:"100%",md:"100%"}},fullWidth:s.fullWidth,label:`${l} ${s.required?" *":""}`,type:s.type,autoFocus:s.autoFocus,autoComplete:s.autoComplete,...u(r,{required:{value:s.required,message:s.errorMessage},disabled:s.disabled,pattern:{value:s.validate.pattern.value,message:s.validate.pattern.message}}),error:!!n,helperText:(null==(a=null==n?void 0:n.value)?void 0:a.message)??""},t)}))}),i.jsx("ul",{style:{margin:0,padding:"0px 0px 0px 18px",fontSize:"14px"},children:["Dilarang menggunakan symbol"].map(((e,t)=>i.jsx("li",{children:e},t)))})]}),i.jsxs(L,{children:[i.jsx(_,{loading:!1,disabled:t,variant:"outlined",size:"medium",onClick:e.backEvent,children:i.jsx(q,{variant:"button",display:"block",gutterBottom:!0,children:"Cancel"})}),i.jsx(_,{type:"submit",loading:t,disabled:t,variant:"contained",size:"medium",children:i.jsx(q,{variant:"button",display:"block",gutterBottom:!0,children:"Create"})})]})]})})}),((e,t)=>JSON.stringify(e)===JSON.stringify(t)));var fe={},ve=c;Object.defineProperty(fe,"__esModule",{value:!0});var ye=fe.default=void 0,he=ve(g()),je=i;ye=fe.default=(0,he.default)((0,je.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");const be=e=>{switch(e){case"trainingType":return"/v1/trainings/types/remove";case"vendorType":return"/v1/vendors/types/remove";default:return`/v1/users/${e}s/remove`}},we=p.memo((e=>{const t=f(e.type),[a,s]=p.useState({open:!1,type:A.CREATE,populate:{id:"",name:""}}),o=e=>{s({open:!0,type:e.type,populate:{id:e.populate.id,name:e.populate.name}})},n=m(),l=M(n.breakpoints.down("md")),d=k(),{selectInputOptions:u}=D((e=>e.components)),[c,g]=p.useState({open:!1,loading:!1,id:"",name:""}),y=()=>{g({open:!1,loading:!1,id:"",name:""})};return r.useEffect((()=>{u[t].loading&&0===u[t].list.length&&d(v({type:e.type}))}),[u,t,d,e]),i.jsxs(p.Fragment,{children:[i.jsxs(R,{fullScreen:l,fullWidth:!0,maxWidth:"sm",onClose:()=>{},"aria-labelledby":"user-create-dialog",disableEscapeKeyDown:!0,open:e.open,children:[i.jsx(N,{sx:{position:"relative",backgroundColor:"white"},children:i.jsxs(re,{children:[i.jsx(O,{edge:"start",color:"inherit",onClick:e.backEvent,"aria-label":"close",children:i.jsx(x,{})}),i.jsx(q,{sx:{ml:2,flex:1},variant:"h6",component:"div",children:b(t)})]})}),i.jsx(F,{sx:{height:"100px",p:"35px"},children:i.jsx(V,{disabled:e.type===P.ROLE,onClick:()=>o({type:A.CREATE,populate:{id:"",name:""}}),children:`+ Add New ${t}`})}),i.jsx(I,{dividers:!0,sx:{height:"300px"},children:u[t].loading?i.jsx(U,{message:`Please wait, prepare data ${t} ...`}):i.jsx(X,{children:0===u[t].list.length?i.jsx(G,{message:`Data ${t} is empty`}):u[t].list.map(((t,a)=>i.jsxs(p.Fragment,{children:[i.jsxs(Z,{dense:!0,button:!0,onClick:a=>{a.stopPropagation,e.onSelect(t.name)},sx:{p:"10px"},children:[i.jsx(Y,{primary:t.name}),e.type!==P.ROLE&&i.jsxs(Q,{children:[i.jsx(O,{"aria-label":"edit",onClick:e=>{e.stopPropagation,console.log("edit",t),o({type:A.UPDATE,populate:{id:t.id,name:t.name}})},children:i.jsx(J,{})}),i.jsx(O,{edge:"end","aria-label":"delete",disabled:!0,onClick:e=>{e.stopPropagation,console.log("delete",t),(e=>{g({open:!0,loading:!1,id:e.id,name:e.name})})(t)},children:i.jsx(ye,{})})]})]}),i.jsx(ee,{})]},a)))})})]}),a.open&&i.jsx(xe,{open:a.open,backEvent:()=>{s({open:!1,type:A.CREATE,populate:{id:"",name:""}})},type:e.type,populate:a.populate,methodType:a.type}),c.open&&i.jsx(K,{open:c.open,titleButtonDisagree:"Cancel",titleButtonAgree:"Delete",title:"Delete",subTitle:`Are you sure you want to delete the ${t} - ${c.name} ?`,onClose:y,loading:c.loading,onSubmit:()=>{var t;g((e=>({...e,loading:!0}))),d((t={type:e.type,id:c.id,successCB:y},async e=>{var a,s;try{const a=f(t.type);return await $({method:"delete",url:be(a),payload:{id:t.id}}),e(E({type:a,id:t.id})),await new Promise((e=>setTimeout(e,500))),e(C({open:!0,autoHideDuration:3e3,severity:"success",message:`Success delete ${a}`})),t.successCB()}catch(r){B.isAxiosError(r)&&r.response&&(console.log("errr",(null==(a=r.response)?void 0:a.data).error),e(C({open:!0,autoHideDuration:3e3,severity:"warning",message:(null==(s=r.response)?void 0:s.data.message)??r.message??""})),e(T({type:f(t.type),loading:!1})))}}))}})]})}),((e,t)=>JSON.stringify(e)===JSON.stringify(t))),Te=e=>{const[t,a]=p.useState({open:!1}),s=()=>{a({open:!0})},r=()=>{a({open:!1})};return i.jsxs(p.Fragment,{children:[i.jsx(W,{error:e.error,disabled:e.disabled,sx:{marginTop:2,marginBottom:1,ml:{xs:0,md:e.style.marginLeft},width:{xs:"100%",md:e.style.width}},children:i.jsx(h,{control:e.control,rules:{required:{value:e.required,message:e.helperText}},name:e.registerField,render:({field:t})=>i.jsxs(p.Fragment,{children:[i.jsx(V,{sx:{height:"56px",pr:"5px"},color:e.error?"error":"secondary",variant:"outlined",onClick:s,children:i.jsxs(F,{sx:{display:"flex",justifyContent:"space-between",width:"100%",position:"relative"},children:[""!==t.value&&i.jsx(q,{variant:"button",display:"block",gutterBottom:!0,sx:{textTransform:"none",position:"absolute",top:"-30px",background:"white",padding:"5px",left:"-7px",fontWeight:"400",fontSize:"12px"},children:`${e.label}${e.required?" *":""}`}),i.jsx(q,{variant:"button",display:"block",gutterBottom:!0,sx:{textTransform:"none",color:""===t.value?"grey":"black"},children:""===t.value?`${e.label}${e.required?" *":""}`:t.value}),i.jsx(ie,{})]})}),e.error&&i.jsx(z,{children:e.helperText})]})})}),t.open&&i.jsx(we,{open:t.open,type:e.SelectInputDialogType,backEvent:r,onSelect:t=>{r(),e.onSelect(t)}})]})};export{Te as S};

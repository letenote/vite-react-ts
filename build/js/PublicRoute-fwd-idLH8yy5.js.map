{"version":3,"file":"PublicRoute-fwd-idLH8yy5.js","sources":["../../src/routes/PublicRoute.tsx"],"sourcesContent":["import { memo } from 'react';\nimport { Navigate, useLocation } from 'react-router-dom';\nimport { useAppSelector } from '../store';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport Typography from '@mui/material/Typography';\n\ntype PublicRouteProps = {\n  children: JSX.Element;\n};\n\nconst PublicRoute = memo(({ children }: PublicRouteProps) => {\n  const { user } = useAppSelector((state) => state.settings);\n  const location = useLocation();\n  console.log('DEBUG:ROUTE:PUBLIC', {\n    location,\n    user,\n    mode: import.meta.env.MODE,\n  });\n\n  if (user.authed) {\n    if (!user.configLoaded)\n      return (\n        <div\n          style={{\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n          }}\n        >\n          <CircularProgress color={'primary'} style={{ marginTop: '50px' }} />\n          <Typography align=\"center\" sx={{ mt: 5 }} variant=\"body2\">\n            Please wait while preparing your data ...\n          </Typography>\n        </div>\n      );\n    if (user.configLoaded)\n      return (\n        <Navigate\n          to={redirectAfterLogin(user.role)}\n          state={{ from: location }}\n          replace\n        />\n      );\n  }\n\n  if (location.pathname === '/' && !user.authed)\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\n\n  return children;\n});\n\nconst redirectAfterLogin = (role: string): string => {\n  switch (role) {\n    default:\n      return '/dashboard';\n  }\n};\n\nexport default PublicRoute;\n"],"names":["PublicRoute","memo","children","user","useAppSelector","state","settings","location","useLocation","console","log","mode","authed","configLoaded","jsxRuntimeExports","jsxs","style","display","flexDirection","alignItems","jsx","CircularProgress","color","marginTop","Typography","align","sx","mt","variant","Navigate","to","redirectAfterLogin","role","from","replace","pathname"],"mappings":"2LAUA,MAAMA,EAAcC,EAAAA,MAAK,EAAGC,eAC1B,MAAMC,KAAEA,GAASC,GAAgBC,GAAUA,EAAMC,WAC3CC,EAAWC,IAOjB,GANAC,QAAQC,IAAI,qBAAsB,CAChCH,WACAJ,OACAQ,KAAM,SAGJR,EAAKS,OAAQ,CACf,IAAKT,EAAKU,aAEN,OAAAC,EAAAC,KAAC,MAAA,CACCC,MAAO,CACLC,QAAS,OACTC,cAAe,SACfC,WAAY,UAGdjB,SAAA,CAAAkB,MAACC,GAAiBC,MAAO,UAAWN,MAAO,CAAEO,UAAW,UACvDH,EAAAA,IAAAI,EAAW,CAAAC,MAAM,SAASC,GAAI,CAAEC,GAAI,GAAKC,QAAQ,QAAQ1B,SAE1D,iDAGN,GAAIC,EAAKU,aAEL,OAAAC,EAAAM,IAACS,EAAA,CACCC,GAAIC,EAAmB5B,EAAK6B,MAC5B3B,MAAO,CAAE4B,KAAM1B,GACf2B,SAAO,GAGf,CAEA,MAA0B,MAAtB3B,EAAS4B,UAAqBhC,EAAKS,OAGhCV,QAFG2B,EAAS,CAAAC,GAAG,SAASzB,MAAO,CAAE4B,KAAM1B,GAAY2B,SAAO,GAE1D,IAGHH,EAAsBC,GAGf"}
import{j as e,R as s,d as t,r as a,z as o}from"./vendor-fwd-1SGvIy31.js";import{M as r}from"./index-fwd-Eq8uD1Os.js";import{s as i,n,u as d}from"./main-fwd--n1B72RI.js";import{c as l}from"./populateString-fwd-uH2jbhuZ.js";import m from"./Index-fwd-B0NBbt1q.js";import{d as p}from"./Close-fwd-cAl8Tvfj.js";import{a as c}from"./index.esm-fwd-rj9UIJ_I.js";import{C as u}from"./ComponentFormType.enum-fwd-9JVL8E6k.js";import{A as f,a as x}from"./API-fwd-wSBNwRC-.js";import{i as w}from"./interopRequireDefault-fwd-TQpPSNg9.js";import{r as g}from"./createSvgIcon-fwd-C5HoRyYL.js";import{l as h}from"./logout-fwd-8340Khlx.js";import{b as j}from"./index-fwd-lWyokz70.js";import{a as v,b as y,c as b}from"./DialogContent-fwd-CYcOnUyi.js";import{D as C}from"./DialogTitle-fwd-BhLgXYUL.js";import S from"./index-fwd-v2U3PscQ.js";import{b as P}from"./index-fwd-YZzHoVcr.js";import T from"./index-fwd-hPOcf5d2.js";import k from"./index-fwd-QlVXGDcN.js";import D from"./index-fwd-goasdrlS.js";import{C as I}from"./Container-fwd--GwYqIzP.js";import{C as W,a as M}from"./CardContent-fwd-w9gbeYrB.js";import N from"./index-fwd-fyRmXZir.js";import{A}from"./Avatar-fwd-DjoP233w.js";import{L}from"./ListItemText-fwd-f8rlfGNg.js";import{B}from"./Button-fwd-V0oP7Gqc.js";import{D as E}from"./Divider-fwd-L0kvT4D9.js";import"./createSvgIcon-fwd-3znVHFND.js";import"./Modal-fwd-p5WxUrg9.js";import"./utils-fwd-Aa8Nbi8J.js";import"./TransitionGroupContext-fwd-AdrtyOFN.js";import"./useSlotProps-fwd-4TF0dLOI.js";import"./Portal-fwd-EmXNK1q8.js";import"./Paper-fwd-WFaa4pXn.js";import"./index-fwd-8NRQb7QL.js";import"./Menu-fwd-Vl9pMXPK.js";import"./Grow-fwd-0-97KQP6.js";import"./List-fwd-B3qUSFQa.js";import"./index-fwd-lbVkD5aF.js";import"./listItemTextClasses-fwd-v4LoqRQE.js";import"./dividerClasses-fwd-g7uA4vLh.js";const O={password:{id:"password",name:"password",fullWidth:!0,label:"Password",placeholder:"type of password",required:!0,errorMessage:"password required",value:"",disabled:!1,type:"password",componentType:u.INPUT_TEXT,autoFocus:!1,autoComplete:"new-password",validate:{pattern:{value:/^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9]).*$/,message:"Must have atleast 1 uppercase, 1 lowercase letter and 1 number"},minLength:{value:8,message:"Password must be at least 8 characters"}},options:[]},newPassword:{id:"newPassword",name:"newPassword",fullWidth:!0,label:"New Password",placeholder:"type of new password",required:!0,errorMessage:"new password required",value:"",disabled:!1,type:"password",componentType:u.INPUT_TEXT,autoFocus:!1,autoComplete:"new-password",validate:{pattern:{value:/^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9]).*$/,message:"Must have atleast 1 uppercase, 1 lowercase letter, 1 number and no space"},minLength:{value:8,message:"Password must be at least 8 characters"}},options:[]}};var z={},q=w;Object.defineProperty(z,"__esModule",{value:!0});var F=z.default=void 0,J=q(g()),R=e;F=z.default=(0,J.default)((0,R.jsx)("path",{d:"M16.59 7.58 10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"CheckCircleOutline");const $=s.memo((r=>{const l=n(),{user:m}=d((e=>e.settings)),u=JSON.parse(JSON.stringify(O)),w=c({defaultValues:async()=>u}),g=t(),I=j(g.breakpoints.down("md")),{register:W,formState:M,handleSubmit:N,watch:A}=w,L=a.useRef({});L.current=A(`${u.password.id}.value`,"");const{errors:B}=M,[E,z]=a.useState({loading:!1}),[q,J]=a.useState({open:!1});return e.jsxs(s.Fragment,{children:[e.jsxs(v,{component:"form",id:"training-create-page",onSubmit:N((e=>{var s;z({loading:!0}),l((s={data:{id:m.id,nps:e.newPassword.value.toString().replace(/\s/g,"")},successCB:()=>{z({loading:!1}),J({open:!0}),setTimeout((()=>{l(h())}),3e3)},failedCB:()=>{z({loading:!1})}},async e=>{var t,a;try{return await f({method:"post",url:"/v1/users/update/ps",payload:s.data}),e(i({open:!0,autoHideDuration:3e3,severity:"success",message:"User information updated"})),await new Promise((e=>setTimeout(e,500))),s.successCB()}catch(o){return x.isAxiosError(o)&&o.response&&(console.log("errr",(null==(t=o.response)?void 0:t.data).error),e(i({open:!0,autoHideDuration:3e3,severity:"warning",message:(null==(a=o.response)?void 0:a.data.message)??o.message??""}))),s.failedCB()}}))}),(e=>{console.log("onError",{_errors:e,form:w}),window.scrollTo({top:0,left:0,behavior:"smooth"}),l(i({open:!0,autoHideDuration:3e3,severity:"warning",message:"Please make sure all forms to be filled"}))})),fullScreen:I,fullWidth:!0,maxWidth:"sm","aria-labelledby":"payment-create-dialog",disableEscapeKeyDown:!0,open:r.open,children:[e.jsx(C,{sx:{m:0,p:2},id:"customized-dialog-title",children:"Update Password"}),e.jsx(S,{"aria-label":"close",onClick:r.closeEvent,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:e.jsx(p,{})}),e.jsxs(y,{dividers:!0,sx:{p:"34px 32px 65px"},children:[Object.keys(u).map((s=>{var t,a,o,r,i,n;const d=s,l=`${u[d].id}.value`;return u[d].componentType,e.jsx(P,{sx:{mb:1},margin:"normal",fullWidth:u[d].fullWidth,label:u[d].label,type:"text",autoFocus:u[d].autoFocus,autoComplete:u[d].autoComplete,defaultValue:u[d].value,...W(l,{required:{value:u[d].required,message:u[d].errorMessage},disabled:u[d].disabled,minLength:{value:(null==(a=null==(t=u[d].validate)?void 0:t.minLength)?void 0:a.value)||0,message:(null==(r=null==(o=u[d].validate)?void 0:o.minLength)?void 0:r.message.toString())||""},validate:{passwordNotSame:e=>e===L.current||"The passwords do not match",noWhitespace:e=>new RegExp(/^\S*$/).test(e)||"Space is not allowed",passwordValidate:e=>new RegExp(/^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9]).*$/).test(e)||"Must have atleast 1 uppercase, 1 lowercase letter and 1 number"}}),error:!!B[d],helperText:null==(n=null==(i=B[d])?void 0:i.value)?void 0:n.message},d)})),e.jsxs(T,{variant:"caption",display:"block",gutterBottom:!0,sx:{mt:3,width:"80%"},children:["Note: Please to input with"," ",e.jsx("span",{style:{fontWeight:900},children:"standart password"})," with atleast 1 uppercase, 1 lowercase letter, 1 number dont use spaces and minimal must be at least 8 characters, for our common security."]})]}),e.jsxs(b,{children:[e.jsx(k,{sx:{mr:1},children:e.jsx(D,{loading:E.loading,disabled:E.loading,variant:"outlined",size:"medium",onClick:r.closeEvent,children:e.jsx(T,{variant:"button",display:"block",gutterBottom:!0,children:"Close"})})}),e.jsx(D,{loading:E.loading,disabled:E.loading,variant:"contained",size:"medium",type:"submit",children:e.jsx(T,{variant:"button",display:"block",gutterBottom:!0,children:"Change"})})]})]}),e.jsxs(v,{open:q.open,maxWidth:"sm","aria-labelledby":"alert-dialog-success-change-information","aria-describedby":"alert-dialog-success-change-information",children:[e.jsxs(y,{sx:{height:"250px",width:{xs:"300px",md:"auto"},display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[e.jsx(F,{sx:{width:72,height:72,mb:2,color:o[500]}}),e.jsx(T,{sx:{textAlign:"center",width:"80%"},children:"Success change password, System will be redirect you to login page."})]}),e.jsx(b,{})]})]})}),((e,s)=>JSON.stringify(e)===JSON.stringify(s))),_=s.memo((()=>{const{user:t}=d((e=>e.settings)),[o,i]=a.useState({open:!1});return e.jsxs(I,{sx:{pt:3,minHeight:"90vh",display:"flex",flexDirection:"column"},maxWidth:!1,children:[e.jsx(r,{title:"Settings",backNavigate:"dashboard"}),e.jsx(W,{sx:{minWidth:275},children:e.jsx(M,{sx:{p:3},children:e.jsxs(N,{container:!0,spacing:2,sx:{p:3},children:[e.jsx(N,{xs:12,md:2,item:!0,sx:{display:"flex",justifyContent:"center"},children:e.jsx(A,{alt:"Remy Sharp",sx:{width:120,height:120}})}),e.jsxs(N,{xs:12,md:4,item:!0,sx:{display:"flex",flexDirection:"column",alignItems:{xs:"center",md:"start"},mt:{xs:2,md:0},ml:{xs:0,md:3}},children:[e.jsx(L,{sx:{textAlign:{xs:"center",md:"left"}},primary:e.jsx(s.Fragment,{children:e.jsx(T,{sx:{display:"inline"},component:"span",variant:"h6",color:"text.primary",children:l(t.name)})}),secondary:e.jsxs(s.Fragment,{children:[e.jsx(T,{sx:{display:"inline"},component:"span",variant:"body2",color:"text.primary",children:l(t.departement)})," — Wish I could come, but I'm out of town this…"]})}),e.jsx(B,{variant:"outlined",size:"small",sx:{width:"190px",mt:1},onClick:()=>{i({open:!0})},children:"Change Password"})]}),e.jsx(E,{orientation:"vertical",variant:"middle",flexItem:!0,sx:{m:"0px 20px",display:{xs:"none",md:"block"}}}),e.jsx(N,{xs:12,md:5,item:!0,sx:{textAlign:"left"}})]})})}),e.jsx(m,{}),o.open&&e.jsx($,{open:o.open,closeEvent:()=>i({open:!1})})]})}),((e,s)=>JSON.stringify(e)===JSON.stringify(s)));export{_ as default};
